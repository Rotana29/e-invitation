<!doctype html>
<html lang="km">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>រតនា ❤️ សុជាតិ</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Floating petals (generated by JS later) -->

  <!-- Welcome Page -->
  <div id="welcome-page">
    <img src="image/Name-Frame-vector-02.png" alt="Groom" style="width: 200px;"><br>
    <h1 class="animate___">សូមគោរពអញ្ជើញ</h1>
    <p id="guest-display"> <br><span id="guest-name"></span></p>
    <p>ថ្ងៃសៅរ៍ ១៣ កើត ខែមាឃ ឆ្នាំម្សាញ់ សប្តស័ក ព.ស.២៥៦៩ <br>ត្រូវនឹងថ្ងៃទី៣១ ខែមករា ឆ្នាំ២០២៦</p>
          <strong></strong>
          
    <button id="open-btn"><strong>ចុចបើកលិខិតអញ្ជើញ</strong></button>
  </div>
  
  <div id="invitation-page" class="container">
    <!-- Audio -->
    <audio id="bgMusic" loop>
      <source src="mjasbesdong.mp3" type="audio/mpeg">
    </audio>

    <!-- Mute Button -->
    <button id="muteBtn" aria-label="Mute or Unmute">🔊</button>
    <div class="card">
      <!-- Corner images -->
      <!--<img src="image/flower_corner.png" alt="Top Left" class="corner top-left">-->
      <!--<img src="" alt="Top Right" class="corner top-right">
      <img src="" alt="Bottom Left" class="corner bottom-left">-->
      <!--<img src="https://via.placeholder.com/80x80.png?text=BR" alt="Bottom Right" class="corner bottom-right">-->
      <!-- Invitation Page -->
      <img src="image/Name-Frame-vector-02.png" alt="Groom" style="width: 200px;">
      <h1>សិរីមង្គល <br>អាពាហ៍ពិពាហ៍</h1>
      <div class="divider"></div>

      <div class="couple">
        <div class="person">
          <img src="image/groom.jpg" alt="Groom">
          <div class="name"><p>កូនប្រុសនាម</p>សំអុន រតនា</div>
        </div>
        <div class="person">
          <img src="image/bride.jpg" alt="Bride">
          <div class="name"><p>កូនស្រីនាម</p>វ៉ាន់ សុជាតិ</div>
        </div>
      </div>
      <img src="image/line_02.png" style="width:300px; height:auto;">
      <div class="message">
        <h2>សូមគោរពអញ្ជើញ</h2>
        ឯកឧត្តម លោកជំទាវ លោកឧកញ៉ា លោក លោកស្រី អ្នកនាង កញ្ញា និងប្រិយមិត្តទាំងអស់គ្នា
        <Br>អញ្ជើញចូលរួមជាភ្ញៀវកិត្តយសក្នុងពិធីមង្គលការរបស់យើងខ្ញុំទាំងពីរ
        <br>សូមអរគុណ! 
      </div>

      <div class="divider"></div>

      <!--<div class="details"><h2>កាលបរិច្ឆេទ</h2>
          <p>ថ្ងៃសៅរ៍ ១៣ កើត ខែមាឃ ឆ្នាំម្សាញ់ សប្តស័ក ព.ស.២៥៦៩</p>
          <strong>ត្រូវនឹងថ្ងៃទី៣១ ខែមករា ឆ្នាំ២០២៦</strong><br>
          Saturday, January 31, 2026
        </div>-->

      <!--Timeline-->
      <div class="timeline">
        <div class="details"><h2>កាលបរិច្ឆេទ</h2>
          <p>ថ្ងៃសៅរ៍ ១៣ កើត ខែមាឃ ឆ្នាំម្សាញ់ សប្តស័ក ព.ស.២៥៦៩</p>
          <strong>ត្រូវនឹងថ្ងៃទី៣១ ខែមករា ឆ្នាំ២០២៦</strong><br>
          Saturday, January 31, 2026
        </div>
        <div class="divider"></div>
        <h3 style="margin: 10px; font-family: 'AKbalthom_Moul_1';">កម្មវិធីមង្គលអាពាហ៍ពិពាហ៍</h3>
          <strong style="color: #b85c7a; margin: 20px;">វេលាម៉ោង ០៦:៣០ ព្រឹក</strong>
          <!--<div class="title">Bride & Groom Preparation</div>-->
          <p class="desc" style="margin-bottom: 10px;">ចួបជុំភ្ញៀវកិត្តយសដើម្បីរៀបចំពិធីហែរជំនួន</p>

          <strong style="color: #b85c7a; margin: 20px;">វេលាម៉ោង ០៧:០០ ព្រឹក</strong>
          <!--<div class="title">Bride & Groom Preparation</div>-->
          <p class="desc" style="margin-bottom: 10px;">ពិធីហែជំនូនចូលរោងជ័យ និងអញ្ជើញភ្ញៀវកិត្តិយស ពិសារអាហារពេលព្រឹក</p>

          <strong style="color: #b85c7a; margin: 20px;">វេលាម៉ោង ០៧:៣០ ព្រឹក</strong>
          <!--<div class="title">Bride & Groom Preparation</div>-->
          <p class="desc" style="margin-bottom: 10px;">ពិធីចៅមហានិយាយជើងការ រាប់ផ្លៃឈើ</p>

          <strong style="color: #b85c7a; margin: 20px;">វេលាម៉ោង ០៩:៣០ ព្រឹក</strong>
          <!--<div class="title">Bride & Groom Preparation</div>-->
          <p class="desc" style="margin-bottom: 10px;">ពិធីកាត់សក់បង្កក់សិរី</p>

          <strong style="color: #b85c7a; margin: 20px;">វេលាម៉ោង ១១:០០ ព្រឹក</strong>
          <!--<div class="title">Bride & Groom Preparation</div>-->
          <p class="desc" style="margin-bottom: 10px;">ពិធីបង្វិលពពិល និងសំពះផ្ទឹមសែនចងដៃ</p>

          <strong style="color: #b85c7a; margin: 20px;">វេលាម៉ោង ១២:០០ ព្រឹក</strong>
          <!--<div class="title">Bride & Groom Preparation</div>-->
          <p class="desc" style="margin-bottom: 10px;" >អញ្ជើញភ្ញៀវកិត្តិយស ពិសារអាហារថ្ងៃត្រង់</p>

          <strong style="color: #b85c7a; margin: 20px;">វេលាម៉ោង ០៥:០០ រសៀល</strong>
          <!--<div class="title">Bride & Groom Preparation</div>-->
          <p class="desc" style="margin-bottom: 10px;">ទទួលភ្ញៀវកិត្តិយស ពិសារភោជនាអាហារ</p>
    </div>
      <img src="image/line_02.png" style="width:300px; height:auto;">
      <h2 style="margin-top:30px">ទីតាំងរៀបចំកម្មវិធី</h2>
        <img src="image/icon/map.png" width="60" height="60" alt="Map" /> <br>
        <a href="https://maps.app.goo.gl/xW4biQYC12UkuPYc8">នៅគេហដ្ឋានខាស្រី <br>ភូមិតាលុស ឃុំបុសលាវ ស្រុកចិត្របុរី ខេត្តក្រចេះ</a><br>
        <a href="https://maps.app.goo.gl/xW4biQYC12UkuPYc8" target="_blank" class="map-button">
          <strong>ចុចចូលមើលទីតាំង</strong>
        </a>
      </a><br>
         <iframe src="https://www.google.com/maps/embed?pb=!1m17!1m12!1m3!1d1762.9732455899925!2d106.03233163704179!3d12.429874154220542!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zMTLCsDI1JzQ3LjIiTiAxMDbCsDAxJzU2LjIiRQ!5e1!3m2!1sen!2skh!4v1759823035136!5m2!1sen!2skh" width="300" height="300" style="border:1px; box-shadow:#bbbbbb 1px 1px 1px;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      <div class="divider"></div>

      <h2 class="magin: 2px;">វិចិត្រសាល</h2>
      

      <div class="album">
        <img src="image/albumimage.jpg" alt="Album Photo 1">
        <img src="image/albumimage.jpg" alt="Album Photo 2">
        <img src="image/albumimage.jpg" alt="Album Photo 3">
        <img src="image/albumimage.jpg" alt="Album Photo 4">
        <img src="image/albumimage.jpg" alt="Album Photo 5">
        <img src="image/albumimage.jpg" alt="Album Photo 6">
      </div>
      <br>
      <img src="image/line_02.png" style="width:300px; height:auto; top:2px;">
      
      <div class="footer">
        <h2>សេចក្ដីថ្លែងអំណរគុណ</h2>
        <p>យើងខ្ញុំជាមាតាបិតាសូមថ្លែងអំណរគុណយ៉ាងជ្រាលជ្រៅ <br>
          ចំពោះការអញ្ជើញចូលរួមជាភ្ញៀវកិត្តិយក្នុងពិធីរៀបអាពាហ៍ពិពាហ៍ កូនប្រុស-កូនស្រី របស់យើងខ្ញុំ។ <br>សូមគោរពជូនពរ ឯកឧត្តម លោកអ្នកឧកញ៉ា អ្នកឧកញ៉ា ឧកញ៉ា លោកជំទាវ លោក លោកស្រី អ្នកនាងកញ្ញា និងប្រិយមិត្តទាំងអស់ សូមមានសុខភាពល្អ និងទទួលជោគជ័យ គ្រប់ភារកិច្ច សូមអរគុណ!</p>
      </div>
      <div class="divider"></div>
    </div>
  </div>

<script>
const music = document.getElementById("bgMusic");
const video = document.getElementById("weddingVideo");
const muteBtn = document.getElementById("muteBtn");

// Initial music settings
music.volume = 0.2;
music.muted = false;

// User interaction flag (desktop autoplay)
let userInteracted = false;

// Enable audio on first click/tap for desktop
function enableAudio() {
  if (!userInteracted) {
    music.play().catch(() => {});
    userInteracted = true;
  }
}
document.addEventListener("click", enableAudio, { once: true });
document.addEventListener("touchstart", enableAudio, { once: true });

// Mute/unmute button for background music
muteBtn.addEventListener("click", e => {
  e.stopPropagation();
  music.muted = !music.muted;
  muteBtn.textContent = music.muted ? "🔇" : "🔊";
});

// IntersectionObserver: play/pause video when scrolling
const videoObserver = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      // Play video and unmute when visible
      video.muted = false;   // unmute video
      video.play().catch(() => {});

      // Pause background music
      if (!music.paused) music.pause();
    } else {
      // Pause video when out of view
      video.pause();

      // Mute video when out of view
      video.muted = true;

      // Resume background music if unmuted
      if (!music.muted && userInteracted) music.play().catch(() => {});
    }
  });
}, { threshold: 0.5 }); // play when 50% of video visible

videoObserver.observe(video);

// Stop music when leaving page
window.addEventListener("beforeunload", () => {
  music.pause();
  music.currentTime = 0;
});

</script>



  <script>
    // Floating petals generator
    const numPetals = 20;
    for (let i = 0; i < numPetals; i++) {
      const petal = document.createElement('div');
      petal.classList.add('petal');
      petal.style.left = Math.random() * 100 + 'vw';
      petal.style.animationDelay = Math.random() * 10 + 's';
      petal.style.animationDuration = 10 + Math.random() * 10 + 's';
      petal.style.transform = `scale(${0.5 + Math.random() * 0.8})`;
      document.body.appendChild(petal);
    }

    // Get guest name from URL
    const urlParams = new URLSearchParams(window.location.search);
    const guestName = urlParams.get('guest');
    const guestSpan = document.getElementById('guest-name');

    if (guestName) {
      guestSpan.innerText = decodeURIComponent(guestName);
    } else {
      guestSpan.innerText = "សូមគោរពអញ្ជើញភ្ញៀវកិត្តិយស";
    }

    // Show invitation
    document.getElementById('open-btn').addEventListener('click', function() {
      const welcome = document.getElementById('welcome-page');
      const invite = document.getElementById('invitation-page');
      welcome.style.opacity = '0';
      setTimeout(() => {
        welcome.style.display = 'none';
        invite.style.display = 'block';
        invite.scrollIntoView({ behavior: 'smooth' });
      }, 1000);
    });

    // Scroll animation
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('show');
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.2 });

    document.querySelectorAll('h1, h2, p, .details, .message, .couple, .album, iframe, .footer')
      .forEach(el => observer.observe(el));

    // Fullscreen album viewer
    const images = document.querySelectorAll('.album img');
    let currentIndex = 0;
    let fullscreenDiv, fullscreenImg;

    images.forEach((img, index) => {
      img.addEventListener('click', () => openFullscreen(index));
    });

    function openFullscreen(index) {
      currentIndex = index;
      fullscreenDiv = document.createElement('div');
      fullscreenDiv.className = 'fullscreen-overlay';
      fullscreenImg = document.createElement('img');
      fullscreenImg.src = images[currentIndex].src;
      fullscreenDiv.appendChild(fullscreenImg);

      const closeBtn = document.createElement('span');
      closeBtn.innerHTML = '&times;';
      closeBtn.className = 'close-btn';
      closeBtn.onclick = () => document.body.removeChild(fullscreenDiv);
      fullscreenDiv.appendChild(closeBtn);

      const prevBtn = document.createElement('span');
      prevBtn.innerHTML = '&#10094;';
      prevBtn.className = 'prev-btn';
      prevBtn.onclick = e => { e.stopPropagation(); showPrev(); };
      fullscreenDiv.appendChild(prevBtn);

      const nextBtn = document.createElement('span');
      nextBtn.innerHTML = '&#10095;';
      nextBtn.className = 'next-btn';
      nextBtn.onclick = e => { e.stopPropagation(); showNext(); };
      fullscreenDiv.appendChild(nextBtn);

      document.body.appendChild(fullscreenDiv);
    }

    function showPrev() {
      currentIndex = (currentIndex - 1 + images.length) % images.length;
      fullscreenImg.src = images[currentIndex].src;
    }

    function showNext() {
      currentIndex = (currentIndex + 1) % images.length;
      fullscreenImg.src = images[currentIndex].src;
    }
  </script>
</body>
</html>

